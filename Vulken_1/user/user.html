<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vulken Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="fade-in">

    <!-- Background Canvas -->
    <canvas id="bgCanvas"></canvas>

    <!-- Topbar: search + profile + logout -->
    <div class="topbar">
        <div class="search-box">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="7"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            <input type="search" placeholder="Search tickets..." aria-label="Search tickets">
        </div>
        <button class="logout-btn" id="logoutBtn">Logout</button>
        <div class="profile-circle" id="profileBtn">AB</div>
        <div class="profile-dropdown" id="profileDropdown" style="display:none;position:absolute;right:18px;top:64px;background:rgba(0,0,0,0.6);padding:8px;border-radius:8px;backdrop-filter:blur(6px);min-width:180px">
            <button class="dropdown-item" id="openProfileSettings" style="background:transparent;border:0;color:#fff;padding:8px 10px;width:100%;text-align:left;cursor:pointer">Profile Settings</button>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <h1>Vulken</h1>
        <a class="button-teal" href="#">Dashboard</a>
        <a class="button-teal" href="#tickets" id="ticketsLink">Tickets</a>
    </div>

    <!-- Main Content -->
    <div class="main-content">
    <h2>Welcome to Vulken Dashboard</h2>
        <!-- Tickets section (hidden by default, revealed when clicking sidebar link) -->
        <section id="tickets" class="tickets-section" aria-hidden="true" style="display:none; margin-top:18px">
            <h3 style="margin-top:0">Send a Ticket</h3>
            <form id="ticketForm">
                <label for="ticketTitle">Title</label>
                <input id="ticketTitle" name="title" type="text" placeholder="Short summary" required style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.25);color:#fff">
                <label for="ticketBody">Describe the issue</label>
                <textarea id="ticketBody" name="body" rows="4" placeholder="Describe the problem..." required style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.25);color:#fff"></textarea>
                <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
                    <button type="submit" id="sendTicketBtn" style="background:var(--teal);border:none;padding:10px 14px;border-radius:8px;color:#002;font-weight:700;cursor:pointer">Send Ticket</button>
                </div>
            </form>

            <div style="margin-top:18px">
                <h4>Sent Tickets</h4>
                <div id="sentTickets" class="sent-tickets" style="margin-top:8px;display:grid;gap:8px"></div>
            </div>
        </section>

        <!-- New dashboard cards: Tickets Sent, Replies, Recent Updates -->
        <div class="cards">
            <div class="card">
                <div class="card-title">Tickets Sent</div>
                <div class="card-count" id="tickets-sent-count">0</div>
                <div class="card-sub">Total tickets you've sent</div>
            </div>

            <div class="card">
                <div class="card-title">Replies to Tickets</div>
                <div class="card-count" id="tickets-replied-count">0</div>
                <div class="card-sub">Number of tickets with replies</div>
            </div>

            <div class="card full-width-card">
                <div class="card-title">Recent Updates</div>
                <div id="recentUpdates" class="recent-updates" style="margin-top:8px;color:rgba(255,255,255,0.9)"></div>
            </div>
        </div>

    </div>

    <script src="script.js"></script>
    <!-- Profile Settings Modal -->
    <div id="profileModal" class="modal" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;z-index:40">
        <div class="modal-backdrop" style="position:absolute;inset:0;background:rgba(0,0,0,0.5)"></div>
        <div class="modal-panel" style="position:relative;background:rgba(17,17,17,0.9);padding:20px;border-radius:12px;z-index:41;width:420px;max-width:90%">
            <h3 style="margin-top:0">Profile Settings</h3>
            <label for="profileName">Display name</label>
            <input id="profileName" type="text" style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.25);color:#fff">
            <label for="profileAvatar">Avatar (image URL)</label>
            <input id="profileAvatar" type="url" placeholder="https://..." style="width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.25);color:#fff">
            <label for="profileAvatarFile" style="margin-top:6px;display:block">Or upload an image</label>
            <input id="profileAvatarFile" type="file" accept="image/*" style="width:100%;padding:6px;margin:6px 0;color:#fff;background:transparent">
            <div id="avatarPreview" style="height:64px;width:64px;border-radius:8px;overflow:hidden;margin-top:8px;border:1px solid rgba(255,255,255,0.06)"></div>
            <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
                <button id="closeProfileModal" style="background:transparent;border:1px solid rgba(255,255,255,0.08);color:#fff;padding:8px 12px;border-radius:8px">Cancel</button>
                <button id="saveProfileBtn">Save</button>
            </div>
        </div>
    </div>
    <script>
        // sample population of card counts (replace with real data)
        document.getElementById('ongoing-count').textContent = 24;
        document.getElementById('pending-count').textContent = 8;
        document.getElementById('overdue-count').textContent = 3;
        document.getElementById('resolved-count').textContent = 112;
    </script>
</body>
</html>
